проверка возможности загрузки обьектов (картинки, скрипты - все равно) в броузер с 3party доменов.

Цель: проверить запрещены ли эти домены/урлы на корпоративном файерволле или прокси.

пользователь заходит на test.example.com и броузер пытается загрузить обьекты с различных доменов, например www.microsoft.com/1.jpg, www.sap.com/2.jpg, yandex.com/favicon.ico


эти обьекты/картинки могут все загрузиться без проблем или же один, несколько или все обьекты могут быть заблокированы:

1. Если обьект заблокирован на фаерволле методом DROP то броузер ждет до таймоута 30-120 секунд. Пример: http://spdy.eu:81/drop.jpg
2. Если обьект заблокирован на фаерволле методом RESET то броузер получает сразу же ответ "the connection was reset", таймоут через 2-5 секунд, пример: http://spdy.eu:82/reset.jpg
3. Если обьект заблокирован на фаерволле методом ICMP (icmp-host-prohibited итд) то броузер обычно получает таймоут через 30-70 секунд. Пример: http://spdy.eu:83/prohibited-icmp.jpg
4. Если обьект заблокирован на прокси то броузер получает status code 403 с status text (access denied или подобно) и html страницу вместо запрашиваемого файла. Пример: https://spdy.eu/mail/config/forbidden.jpg

Timeout: в различных броузерах это значение от 60 до 200 секунд, хорошо бы если бы была возможность не ждать 90 секунд а показывать результат "таймаут" уже после 10-20 секунд.
(TODO в будущей версии: определять значения таймоута базуруясь на User-Agent пользователя и показывать счетчик обратного времени (countdown) сколько еще ждать до окончания проверки. Заводские значения Firefox: network.http.connection-timeout=90)

Например после 120 секунд мы имеем следущую ситуацию:
http://spdy.eu:81/drop.jpg - таймоут через XX секунд, картинка не может загрузиться
http://spdy.eu:82/reset.jpg - мгновенный ресет, картинка не может загрузиться
http://spdy.eu:83/prohibited-icmp.jpg - таймоут через ХХ секунд, картинка не может загрузиться
http://spdy.eu/denied.jpg - ответ в течении 1 секунды "access denied", картинка не может загрузиться, т.к. прокси выслал html страницу вместо jpg
https://c1.microsoft.com/c.gif - разрешено, картинка успешно загружена в течении 1 секунды.

В броузере таблица заполняется значениями, успешные загрузки карнинки отмечаются OK, неудачные - "ошибка". 
Желательно: Хорошо бы если бы можно было различать между вышеперечисленными ошибками (таймаут, ресет и denied). 

Желательно: Было бы очень хорошо если бы была возможность получить информацию про http headers и содержимое block page если файл был заблокирован прокси.

Желательно: Также интересна любая информация об ошибке, на какой секунде таймаут (на десятой или на 120-ой).

Сами загруженные картинки не надо показывать в таблице, нужет только результат загрузки.

После того как все проверки (загрузки картинок) завершены (или после завершения каждой проверки/загрузки) результаты также отправляются на сервер test.example.com в виде текста или json:
url1=ok,url2=ok,url3=error,url4=timeout,url5=ok,....
или:
www.microsoft.com=ok,download.com=error,sap.com=timeout,....
или:
www.microsoft.com=ok,download.com=,sap.com=timeout60,yandex.ru=certerror,.... <- в этом случае передается также информация о таймоуте 60сек на sap.com и о ошибке сертификата на яндексе

сервер вычисляет на основе этих данных финальное значение/статус и передает это обратно в броузер, броузер показывает это значение внизу под таблицей результатов.

Саму серверную часть писать не надо, для прототипа будет достаточно если сервер на загрузку любых результатов отвечает "ABC123" и это высвечивается внизу под таблицей результатов.


